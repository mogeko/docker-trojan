#!/bin/sh

translation_list() {
    _list="[ "
    for _key in "$@"; do
        _list="${_list}\"${_key}\", "
    done
    echo "${_list:0:0-2} ]"
}

export TROJAN_LOCALE_ADDR="${TROJAN_LOCALE_ADDR:-0.0.0.0}"
export TROJAN_LOCALE_PORT="${TROJAN_LOCALE_PORT:-443}"
export TROJAN_REMOTE_ADDR="${TROJAN_REMOTE_ADDR:-127.0.0.1}"
export TROJAN_REMOTE_PORT="${TROJAN_REMOTE_PORT:-80}"
export TROJAN_PASSWORD="$(translation_list ${TROJAN_PASSWORD:-password1 password2})"
export TROJAN_LOG_LEVEL="${TROJAN_LOG_LEVEL:-1}"
export TROJAN_SSL_CERT="${TROJAN_SSL_CERT:-/path/to/certificate.crt}"
export TROJAN_SSL_KEY="${TROJAN_SSL_KEY:-/path/to/private.key}"
export TROJAN_SSL_CIPHER="${TROJAN_SSL_CIPHER:-ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384}"
export TROJAN_SSL_CIPHER_TLS13="${TROJAN_SSL_CIPHER_TLS13:-TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384}"
export TROJAN_SSL_PREFER_SERVER_CIPHER="${TROJAN_SSL_PREFER_SERVER_CIPHER:-true}"
export TROJAN_SSL_ALPN="$(translation_list ${TROJAN_SSL_ALPN:-http/1.1})"
export TROJAN_SSL_ALPN_PORT_OVERRIDE_H2="${TROJAN_SSL_ALPN_PORT_OVERRIDE_H2:-81}"
export TROJAN_SSL_REUSE_SESSION="${TROJAN_SSL_REUSE_SESSION:-true}"
export TROJAN_SSL_SESSION_TICKET="${TROJAN_SSL_SESSION_TICKET:-false}"
export TROJAN_SSL_SESSION_TIMEOUT="${TROJAN_SSL_SESSION_TIMEOUT:-600}"
export TROJAN_TCP_PREFER_IPV4="${TROJAN_TCP_PREFER_IPV4:-false}"
export TROJAN_TCP_NO_DELAY="${TROJAN_TCP_NO_DELAY:-true}"
export TROJAN_TCP_KEEP_ALIVE="${TROJAN_TCP_KEEP_ALIVE:-true}"
export TROJAN_TCP_REUSE_PORT="${TROJAN_TCP_REUSE_PORT:-false}"
export TROJAN_TCP_FAST_OPEN="${TROJAN_TCP_FAST_OPEN:-false}"
export TROJAN_TCP_FAST_OPEN_QLEN="${TROJAN_TCP_FAST_OPEN_QLEN:-20}"
export TROJAN_MYSQL_ENABLED="${TROJAN_MYSQL_ENABLED:-false}"
export TROJAN_MYSQL_SERVER_ADDR="${TROJAN_MYSQL_SERVER_ADDR:-127.0.0.1}"
export TROJAN_MYSQL_SERVER_PORT="${TROJAN_MYSQL_SERVER_PORT:-3306}"
export TROJAN_MYSQL_DATABASE="${TROJAN_MYSQL_DATABASE:-trojan}"
export TROJAN_MYSQL_USERNAME="${TROJAN_MYSQL_USERNAME:-trojan}"
